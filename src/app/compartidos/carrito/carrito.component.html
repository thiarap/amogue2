<div class="fondo">
  <div class="carrito-container">

    <h2 class="titulo-carrito">
      <i class="bi bi-cart"></i> Carrito
    </h2>

    <div *ngIf="carrito.length > 0; else vacio">

      <table class="tabla-carrito">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Cantidad</th>
            <th>Subtotal</th>
            <th>Quitar</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let item of carrito">

            <!-- Imagen -->
            <td class="celda-imagen">
              <img *ngIf="item.imagen" [src]="'http://localhost/api_proyecto/public/uploads/' + item.imagen"
                class="producto-img" />
            </td>

            <!-- Nombre -->
            <td class="celda-nombre">
              {{ item.nombre }}
            </td>

            <!-- Precio -->
            <td>$ {{ item.precio_unitario }}</td>

            <!-- Cantidad -->
            <td class="celda-cantidad">
              <button class="btn-cantidad"
                (click)="cambiarCantidad(item.id_detalle_carrito, { target: { value: item.cantidad + 1 } })">
                +
              </button>

              <span class="cantidad-num">{{ item.cantidad }}</span>

              <button class="btn-cantidad"
                (click)="item.cantidad > 1 && cambiarCantidad(item.id_detalle_carrito, { target: { value: item.cantidad - 1 } })">
                -
              </button>
            </td>

            <!-- Subtotal -->
            <td>$ {{ item.subtotal }}</td>

            <!-- Quitar -->
            <td>
              <button class="btn-quitar" (click)="eliminar(item.id_detalle_carrito)">
                Quitar del carrito
              </button>
            </td>

          </tr>
        </tbody>
      </table>

      <div class="contenedor-total">
        <button class="btn-comprar" (click)="irACompra()">Comprar</button>
        <h3>Total: ${{ total }}</h3>
      </div>

    </div>

    <ng-template #vacio>
      <div class="carrito-vacio">
        Tu carrito está vacío.
      </div>
    </ng-template>
  </div>
  <br><br><br>
</div>